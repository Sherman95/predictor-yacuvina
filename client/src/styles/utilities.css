/* =============================================================
   UTILIDADES COMPARTIDAS + ACCESIBILIDAD + REDUCCIÓN ANIMACIONES
   ============================================================= */

:root {
  --focus-ring: 0 0 0 3px rgba(255,255,255,0.25), 0 0 0 5px rgba(255,107,53,0.6);
  --transition-base: 0.25s cubic-bezier(0.4,0,0.2,1);
}

/* Enfoque accesible para elementos interactivos */
:where(a, button, [role="button"], input, select, textarea) {
  outline: none;
}
:where(a, button, [role="button"], input, select, textarea):focus-visible {
  box-shadow: var(--focus-ring);
  border-radius: 6px;
}

/* Botón primario reutilizable */
.btn-primary {
  --btn-bg: var(--gradient-primary);
  --btn-shadow: 0 4px 16px rgba(255,107,53,0.35);
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  padding: .85rem 1.6rem;
  border: 0;
  border-radius: 14px;
  background: var(--btn-bg);
  color: #fff;
  font-weight: 600;
  font-size: .95rem;
  letter-spacing: .5px;
  cursor: pointer;
  transition: var(--transition-base);
  box-shadow: var(--btn-shadow);
  backdrop-filter: blur(12px);
}
.btn-primary:hover { transform: translateY(-3px); box-shadow: 0 8px 28px rgba(255,107,53,0.5); }
.btn-primary:active { transform: translateY(-1px) scale(.97); }
.btn-primary:disabled { opacity: .55; pointer-events: none; }

/* Botón sutil secundario */
.btn-ghost {
  background: var(--glass-bg);
  border: 1px solid rgba(255,255,255,0.25);
  color: var(--text-primary);
}
.btn-ghost:hover { background: rgba(255,255,255,0.12); }

/* Contenedor glass reutilizable */
.glass-panel {
  background: var(--glass-bg);
  backdrop-filter: blur(18px);
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 20px;
  box-shadow: var(--shadow-glass);
  position: relative;
}

/* Texto degradado rápido */
.text-gradient-primary { background: var(--gradient-primary); -webkit-background-clip: text; color: transparent; }
.text-gradient-accent { background: var(--gradient-accent); -webkit-background-clip: text; color: transparent; }

/* Utilidades de layout */
.flex-center { display: flex; align-items: center; justify-content: center; }
.grid-auto-fit { display: grid; gap: 1.5rem; grid-template-columns: repeat(auto-fit,minmax(280px,1fr)); }

/* Espaciados */
.mt-2 { margin-top: .5rem; } .mt-3 { margin-top: 1rem; } .mt-4 { margin-top: 1.5rem; }
.mb-2 { margin-bottom: .5rem; } .mb-3 { margin-bottom: 1rem; } .mb-4 { margin-bottom: 1.5rem; }

/* Reducción/respeto a preferencias del usuario */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
}

/* Clase para desactivar animaciones pesadas manualmente si se desea */
.disable-heavy-anim .sunset-icon,
.disable-heavy-anim .sunset-icon-large,
.disable-heavy-anim [class*="icon-mar-nubes"],
.disable-heavy-anim [class*="icon-atardecer-despejado"],
.disable-heavy-anim [class*="icon-mixto"] {
  animation: none !important;
  box-shadow: none !important;
  filter: none !important;
}

/* Transiciones suaves para imágenes de galería */
.galeria-img { transition: transform .4s ease, box-shadow .4s ease; }
.galeria-img:focus-visible { outline: none; box-shadow: 0 0 0 4px rgba(255,255,255,.35),0 0 0 8px rgba(255,107,53,.6); }
.galeria-img:hover { transform: scale(1.06); box-shadow: 0 12px 38px -10px rgba(0,0,0,.5); }

/* Mejor accesibilidad para overlay visor */
.visor-cerrar { cursor: pointer; }
.visor-cerrar:focus-visible { box-shadow: var(--focus-ring); }

/* Estados de error y éxito reutilizables */
.alert { padding: 1rem 1.25rem; border-radius: 14px; font-weight: 500; line-height: 1.4; backdrop-filter: blur(14px); }
.alert-error { background: rgba(220,53,69,.18); border: 1px solid rgba(220,53,69,.45); color: #ffd7dc; }
.alert-info { background: rgba(25,118,210,.18); border: 1px solid rgba(25,118,210,.45); color: #d0e7ff; }
.alert-success { background: rgba(16,185,129,.18); border: 1px solid rgba(16,185,129,.45); color: #c7f9e9; }

/* Indicador de carga reutilizable compacto */
.loader-ring { width: 42px; height: 42px; border: 4px solid rgba(255,255,255,.15); border-top-color: var(--primary-color); border-radius: 50%; animation: spin .9s linear infinite; margin:auto; }
@keyframes spin { to { transform: rotate(360deg); } }

/* Limitar ancho de texto largo */
.prose { max-width: 70ch; }

/* Tabla mínima (si se agrega en futuro) */
.table-min { width: 100%; border-collapse: collapse; font-size: .85rem; }
.table-min th, .table-min td { padding: .6rem .8rem; border-bottom: 1px solid rgba(255,255,255,.12); }
.table-min th { text-align: left; font-weight: 600; color: var(--text-secondary); }

/* Elevaciones pequeñas */
.shadow-sm { box-shadow: 0 2px 6px rgba(0,0,0,.25); }
.shadow-md { box-shadow: 0 6px 18px rgba(0,0,0,.35); }
.shadow-lg { box-shadow: 0 14px 36px -6px rgba(0,0,0,.55); }

/* Helpers de borde */
.rounded-sm { border-radius: 6px; } .rounded-md { border-radius: 12px; } .rounded-lg { border-radius: 18px; }

/* Línea divisoria */
.divider { height:1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,.25), transparent); margin:2rem 0; border:none; }

/* Extraído estilos inline PronosticoCard */
.panel-expandido { margin-top:20px; padding:25px; background: var(--glass-bg); border-radius: 20px; backdrop-filter: blur(20px); border:1px solid rgba(255,255,255,.25); }
.grid-expandido { display:grid; grid-template-columns: repeat(auto-fit,minmax(150px,1fr)); gap:15px; margin-bottom:20px; }
.detalle-extra { text-align:center; padding:15px; background: rgba(255,255,255,0.07); border-radius:14px; border:1px solid rgba(255,255,255,0.2); transition: var(--transition-base); }
.detalle-extra:hover { transform: translateY(-4px); background: rgba(255,255,255,0.12); }
.detalle-emoji { font-size:1.8rem; display:block; margin-bottom:8px; }
.detalle-valor-extra { font-size:1.05rem; font-weight:700; color: var(--text-primary); display:block; margin-bottom:4px; }
.detalle-label-extra { font-size:.8rem; color: var(--text-muted); }
.nube-line { display:flex; align-items:center; gap:12px; margin-bottom:12px; }
.nube-track { flex:1; height:14px; background: rgba(0,0,0,0.25); border-radius:7px; overflow:hidden; }
.nube-track .nube-fill { border-radius:7px; transition: width .4s ease; background: linear-gradient(90deg, var(--sunset-orange), var(--sunset-pink)); }
.nube-barra:nth-child(2) .nube-fill { background: linear-gradient(90deg, #f59e0b, #d97706); }
.nube-barra:nth-child(3) .nube-fill { background: linear-gradient(90deg, #dc2626, #b91c1c); }
.nube-valor-extra { font-size:.9rem; min-width:45px; text-align:right; font-weight:600; color: var(--text-secondary); }

/* Metric chips for PronosticoCard */
.metric-chips { display:flex; flex-wrap:wrap; gap:.85rem; justify-content:space-between; margin:1.2rem 0 0.6rem; }
/* =============================================================
   MOBILE CAROUSEL / SCROLL-SNAP SYSTEM
   ============================================================= */
@media (max-width: 680px) {
  .snap-row { display:flex; gap:1rem; overflow-x:auto; scroll-snap-type:x mandatory; padding:0 .85rem 0 1rem; -webkit-overflow-scrolling:touch; overscroll-behavior-x:contain; }
  .snap-row::-webkit-scrollbar { display:none; }
  .snap-item { scroll-snap-align:start; scroll-snap-stop:always; flex:0 0 82%; max-width:340px; }
  /* Info cards convert to horizontal */
  .info-grid { display:flex; gap:1rem; overflow-x:auto; scroll-snap-type:x mandatory; padding:0 .85rem 0 1rem; }
  .info-grid .info-card { flex:0 0 82%; max-width:340px; scroll-snap-align:start; }
  .info-grid::-webkit-scrollbar { display:none; }
  /* Pronóstico horizontal compacto */
  /* Pronóstico: una sola tarjeta visible a la vez */
  .pronostico-grid { display:flex; gap:1.1rem; overflow-x:auto; scroll-snap-type:x mandatory; padding:0 1.1rem 1.25rem; justify-content:flex-start; }
  .pronostico-grid .forecast-card { flex:0 0 82%; max-width:420px; scroll-snap-align:center; }
  .pronostico-grid::-webkit-scrollbar { display:none; }
  /* Galería a carrusel */
  .galeria-grid { display:flex; gap:1rem; overflow-x:auto; scroll-snap-type:x mandatory; padding:0 1rem 1.25rem; }
  .galeria-grid .galeria-img { flex:0 0 85vw; max-width:480px; height:260px; scroll-snap-align:center; }
  .galeria-grid::-webkit-scrollbar { display:none; }
  /* Reduce glass blur intensity for performance */
  .info-card, .pronostico-card, .clima-actual-card, .actividades-container, .galeria-container { backdrop-filter: blur(12px); }
  /* Spacing adjustments to avoid cramped look */
  .info-detallada h2 { font-size:2rem; margin-bottom:1.6rem; }
  .actividades-container, .galeria-container { padding:2rem 1.25rem; margin-top:3.5rem; }
  .clima-actual-container { margin:1.5rem 0 2.5rem; }
}

/* ===== Enhanced Forecast Carousel (mobile) ===== */
@media (max-width:680px) {
  .pronostico-grid { position:relative; padding-top:.75rem; padding-bottom:1.4rem; scroll-padding-left:12%; scroll-padding-right:12%; }
  .pronostico-grid::before, .pronostico-grid::after { content:""; position:absolute; top:0; bottom:0; width:46px; z-index:3; pointer-events:none; }
  .pronostico-grid::before { left:0; background:linear-gradient(90deg, rgba(0,0,0,.55), rgba(0,0,0,0)); }
  .pronostico-grid::after { right:0; background:linear-gradient(-90deg, rgba(0,0,0,.55), rgba(0,0,0,0)); }
  .pronostico-grid .forecast-card { transform:translateX(0); opacity:.92; transition:box-shadow .45s, background .45s, opacity .45s, transform .55s; border:1px solid rgba(255,255,255,.16); backdrop-filter:blur(18px) saturate(140%); background:linear-gradient(155deg, rgba(255,255,255,0.10), rgba(255,255,255,0.03)); padding:1.15rem 1.1rem 1.2rem; border-radius:22px; position:relative; }
  .pronostico-grid .forecast-card::after { content:""; position:absolute; inset:0; border-radius:inherit; padding:1px; background:linear-gradient(140deg,rgba(255,107,53,.55),rgba(199,125,255,.35)); -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; opacity:.6; pointer-events:none; }
  .pronostico-grid .forecast-card.is-visible { opacity:1; box-shadow:0 10px 30px -10px rgba(0,0,0,.6), 0 0 0 1px rgba(255,255,255,.2); transform:translateY(-4px); }
  .pronostico-grid .forecast-card h2 { font-size:.95rem; margin:0 0 .15rem; letter-spacing:.5px; }
  .pronostico-grid .forecast-card .fecha { font-size:.60rem; opacity:.65; margin:0 0 .35rem; font-weight:500; }
  .pronostico-grid .forecast-card .tipo-atardecer { font-size:.63rem; gap:.35rem; padding:.45rem .65rem; margin:.25rem auto .55rem; }
  .pronostico-grid .forecast-card .emoji-icon { font-size:1.35rem !important; margin-right:.25rem !important; }
  .pronostico-grid .forecast-card .prediccion-texto { font-size:.78rem; min-height:2.2em; line-height:1.15; letter-spacing:.4px; margin:.4rem 0 .55rem; }
  .pronostico-grid .forecast-card .puntaje-numerico { position:absolute; top:.65rem; right:.65rem; margin:0; }
  .pronostico-grid .forecast-card .puntaje-numerico span { font-size:.65rem; padding:.25rem .5rem; backdrop-filter:blur(8px); background:rgba(0,0,0,.35); box-shadow:0 0 0 1px rgba(255,255,255,.18); }
  .pronostico-grid .forecast-card .ver-detalles-btn { margin-top:.35rem; font-size:.68rem; padding:.55rem .75rem; font-weight:600; letter-spacing:.5px; }
  .pronostico-grid .forecast-card .panel-expandido { margin-top:.9rem; padding:1rem 1rem 1.1rem; }
  .pronostico-grid .forecast-card .panel-expandido .metric-chip { flex:1 1 120px; min-width:118px; padding:.55rem .7rem; border-radius:14px; }
  .pronostico-grid .forecast-card .panel-expandido .metric-value { font-size:.85rem; }
  .pronostico-grid .forecast-card .panel-expandido .metric-label { font-size:.55rem; }
  .pronostico-grid .forecast-card .confianza span { font-size:.6rem; padding:.45rem .8rem; }
  .pronostico-grid .forecast-card:focus-visible { outline:none; box-shadow:0 0 0 3px rgba(255,255,255,.55),0 0 0 6px rgba(255,107,53,.45); }
}

/* Carousel dots */
@media (max-width:680px) {
  .carousel-dots { display:flex; justify-content:center; gap:.5rem; margin:-.3rem 0 1.2rem; }
  .carousel-dots button { width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.25); border:none; padding:0; cursor:pointer; transition:background .35s, transform .35s; }
  .carousel-dots button[aria-current="true"] { background:var(--sunset-orange); transform:scale(1.4); box-shadow:0 0 0 4px rgba(255,107,53,.25); }
  .carousel-dots button:focus-visible { outline:none; box-shadow:0 0 0 3px rgba(255,255,255,.6); }
}

@media (min-width:681px) { .carousel-dots { display:none !important; } }

/* Hint indicator for first-time horizontal scroll (optional) */
.hint-scroll { position:absolute; top:.35rem; right:1rem; font-size:.65rem; letter-spacing:.5px; background:rgba(255,255,255,.15); padding:.3rem .55rem; border-radius:10px; backdrop-filter:blur(8px); display:flex; align-items:center; gap:.35rem; animation:hint-pulse 2.8s ease-in-out 2; }
@keyframes hint-pulse { 0%,100% { opacity:.85; transform:translateX(0); } 50% { opacity:0; transform:translateX(6px); } }
.metric-chip { flex:1 1 140px; min-width:130px; display:flex; gap:.65rem; align-items:center; padding:.65rem .85rem; background: var(--glass-bg); backdrop-filter: blur(14px); border:1px solid rgba(255,255,255,.18); border-radius:16px; position:relative; overflow:hidden; box-shadow:0 4px 14px -6px rgba(0,0,0,.35); transition:var(--transition-base); }
.metric-chip:hover { transform:translateY(-4px); box-shadow:0 8px 24px -6px rgba(0,0,0,.45); }
.metric-icon { font-size:1.4rem; line-height:1; filter: drop-shadow(0 2px 4px rgba(0,0,0,.4)); }
.metric-info { display:flex; flex-direction:column; gap:2px; flex:1; }
.metric-value { font-weight:700; font-size:.95rem; letter-spacing:.5px; }
.metric-value[data-small] { font-size:.85rem; font-weight:600; }
.metric-label { font-size:.65rem; text-transform:uppercase; letter-spacing:1.2px; opacity:.75; font-weight:600; }
.metric-bar { margin-top:4px; height:6px; width:100%; background:rgba(255,255,255,.15); border-radius:4px; overflow:hidden; position:relative; }
.metric-bar-fill { height:100%; background:linear-gradient(90deg,var(--sunset-orange),var(--sunset-pink)); box-shadow:0 0 6px rgba(255,255,255,.4) inset; transition:width .5s ease; }
.metric-badge { margin-top:4px; align-self:flex-start; font-size:.55rem; font-weight:700; padding:3px 6px; letter-spacing:.5px; border-radius:8px; background:linear-gradient(135deg,#6366f1,#8b5cf6); color:#fff; box-shadow:0 2px 6px rgba(0,0,0,.35); }
.metric-wind .metric-badge { background:linear-gradient(135deg,#0ea5e9,#6366f1); }
.metric-humidity .metric-bar-fill { background:linear-gradient(90deg,#0ea5e9,#67e8f9); }
.metric-temp { border:1px solid rgba(255,107,53,.35); }
.metric-temp .metric-value { background:linear-gradient(90deg,#ff6b35,#ffb347); -webkit-background-clip:text; color:transparent; }
.metric-sunset { border:1px solid rgba(255,183,77,.4); }
.metric-sunset .metric-value { color:#ffdca8; font-variant-numeric:tabular-nums; }
.metric-wind { border:1px solid rgba(99,102,241,.35); }
.metric-humidity { border:1px solid rgba(56,189,248,.35); }

/* ===== Skeleton Loader for Forecast ===== */
.forecast-skeleton-row { display:flex; gap:1rem; overflow:hidden; padding:0 .75rem 1.25rem; }
.forecast-skeleton-card { flex:0 0 280px; max-width:280px; background:var(--glass-bg); border:1px solid rgba(255,255,255,.18); border-radius:22px; padding:1.25rem 1.1rem 1.4rem; position:relative; overflow:hidden; }
.skeleton-shine { position:absolute; inset:0; background:linear-gradient(110deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.25) 40%, rgba(255,255,255,0.05) 80%); background-size:200% 100%; animation:skeleton-move 1.4s linear infinite; mix-blend-mode:overlay; }
.skeleton-line { height:10px; border-radius:6px; background:rgba(255,255,255,.12); margin:.55rem 0; width:100%; overflow:hidden; position:relative; }
.skeleton-line.short { width:60%; }
.skeleton-badge { width:55px; height:18px; border-radius:10px; background:rgba(255,255,255,.15); position:absolute; top:.8rem; right:.8rem; }
.skeleton-icon { width:70px; height:70px; border-radius:22px; background:rgba(255,255,255,.1); margin:.4rem auto; }
@keyframes skeleton-move { 0% { background-position:200% 0; } 100% { background-position:-200% 0; } }

@media (max-width:680px) {
  .forecast-skeleton-row { padding:0 1.1rem 1.25rem; }
  .forecast-skeleton-card { flex:0 0 86%; max-width:420px; }
}

/* ===== Mobile Global Breathing Space Adjustments ===== */
@media (max-width:680px) {
  .app-container { padding:1.35rem 0 2.2rem; }
  header { margin-bottom:2.25rem; }
  .mejor-dia-banner { margin:2.2rem 0 2.4rem; padding:2rem 1.4rem; }
  .info-detallada { margin-bottom:3rem; }
  .info-grid { gap:1.35rem; padding:0 0 .4rem; }
  .info-grid .info-card { padding:1.6rem 1.35rem 1.55rem; }
  .clima-actual-container { margin:2.4rem 0 2.8rem !important; }
  .actividades-container, .galeria-container { margin-top:4.2rem; padding:2.3rem 1.4rem 2.6rem; }
  .galeria-grid { gap:1.35rem; }
  .galeria-grid .galeria-img { border-radius:28px; }
  footer { margin-top:4.5rem; padding:2.2rem 1.25rem; }
  /* soften card density */
  .forecast-card, .info-card, .clima-actual-card { box-shadow:0 8px 26px -10px rgba(0,0,0,.55); }
  .forecast-card:not(.is-visible) { opacity:.78; }
  .pronostico-grid { gap:1.35rem; }
}
